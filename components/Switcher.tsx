import { useState, useEffect } from "react";
const useTheme = (): [string, () => void] => {
  const [theme, setTheme] = useState<string>("light");

  const toggleTheme = (): void => {
    setTheme((prevTheme) => (prevTheme === "light" ? "dark" : "light"));
  };

  return [theme, toggleTheme];
};

const hoverSounds = () => {
  const audioElement = new Audio("assets/hover.flac");
  audioElement.play();
};

const clickSounds = () => {
  const audioElement = new Audio("assets/click.mp3");
  audioElement.play();
};

export default function Switcher() {
  const off = (
    <svg
      width="25"
      height="25"
      viewBox="0 0 48 48"
      xmlns="http://www.w3.org/2000/svg"
      className="hover:drop-shadow-glow"
    >
      <path
        d="M24 48C17.3333 48 11.6667 45.6667 7 41C2.33333 36.3333 0 30.6667 0 24C0 17.3333 2.33333 11.6667 7 7C11.6667 2.33333 17.3333 0 24 0C24.6222 0 25.2338 0.0222225 25.8347 0.0666669C26.4356 0.111111 27.024 0.177778 27.6 0.266666C25.7778 1.55556 24.3218 3.23378 23.232 5.30133C22.1422 7.36889 21.5982 9.60178 21.6 12C21.6 16 23 19.4 25.8 22.2C28.6 25 32 26.4 36 26.4C38.4444 26.4 40.6889 25.8551 42.7333 24.7653C44.7778 23.6756 46.4444 22.2204 47.7333 20.4C47.8222 20.9778 47.8889 21.5662 47.9333 22.1653C47.9778 22.7644 48 23.376 48 24C48 30.6667 45.6667 36.3333 41 41C36.3333 45.6667 30.6667 48 24 48Z"
        fill="#D9D9D9"        
      />
    </svg>
  );
  const on = (
    <svg
      width="25"
      height="25"
      viewBox="0 0 59 59"
      xmlns="http://www.w3.org/2000/svg"
      className="hover:drop-shadow-glow"
    >
      <path
        d="M29.3333 42.6667C25.6444 42.6667 22.5004 41.3662 19.9013 38.7653C17.3022 36.1644 16.0018 33.0204 16 29.3333C16 25.6444 17.3004 22.5004 19.9013 19.9013C22.5022 17.3022 25.6462 16.0018 29.3333 16C33.0222 16 36.1671 17.3004 38.768 19.9013C41.3689 22.5022 42.6684 25.6462 42.6667 29.3333C42.6667 33.0222 41.3662 36.1671 38.7653 38.768C36.1644 41.3689 33.0204 42.6684 29.3333 42.6667ZM2.66667 32C1.91111 32 1.27822 31.744 0.768 31.232C0.257778 30.72 0.00177778 30.0871 0 29.3333C0 28.5778 0.256 27.9449 0.768 27.4347C1.28 26.9244 1.91289 26.6684 2.66667 26.6667H8C8.75556 26.6667 9.38933 26.9227 9.90133 27.4347C10.4133 27.9467 10.6684 28.5796 10.6667 29.3333C10.6667 30.0889 10.4107 30.7227 9.89867 31.2347C9.38667 31.7467 8.75378 32.0018 8 32H2.66667ZM50.6667 32C49.9111 32 49.2782 31.744 48.768 31.232C48.2578 30.72 48.0018 30.0871 48 29.3333C48 28.5778 48.256 27.9449 48.768 27.4347C49.28 26.9244 49.9129 26.6684 50.6667 26.6667H56C56.7556 26.6667 57.3893 26.9227 57.9013 27.4347C58.4133 27.9467 58.6684 28.5796 58.6667 29.3333C58.6667 30.0889 58.4107 30.7227 57.8987 31.2347C57.3867 31.7467 56.7538 32.0018 56 32H50.6667ZM29.3333 10.6667C28.5778 10.6667 27.9449 10.4107 27.4347 9.89867C26.9244 9.38667 26.6684 8.75378 26.6667 8V2.66667C26.6667 1.91111 26.9227 1.27822 27.4347 0.768C27.9467 0.257778 28.5796 0.00177778 29.3333 0C30.0889 0 30.7227 0.256 31.2347 0.768C31.7467 1.28 32.0018 1.91289 32 2.66667V8C32 8.75556 31.744 9.38933 31.232 9.90133C30.72 10.4133 30.0871 10.6684 29.3333 10.6667ZM29.3333 58.6667C28.5778 58.6667 27.9449 58.4107 27.4347 57.8987C26.9244 57.3867 26.6684 56.7538 26.6667 56V50.6667C26.6667 49.9111 26.9227 49.2782 27.4347 48.768C27.9467 48.2578 28.5796 48.0018 29.3333 48C30.0889 48 30.7227 48.256 31.2347 48.768C31.7467 49.28 32.0018 49.9129 32 50.6667V56C32 56.7556 31.744 57.3893 31.232 57.9013C30.72 58.4133 30.0871 58.6684 29.3333 58.6667ZM12.4 16.1333L9.53333 13.3333C9 12.8444 8.744 12.2222 8.76533 11.4667C8.78667 10.7111 9.04267 10.0667 9.53333 9.53333C10.0667 9 10.7111 8.73333 11.4667 8.73333C12.2222 8.73333 12.8444 9 13.3333 9.53333L16.1333 12.4C16.6222 12.9333 16.8667 13.5556 16.8667 14.2667C16.8667 14.9778 16.6222 15.6 16.1333 16.1333C15.6444 16.6667 15.0338 16.9227 14.3013 16.9013C13.5689 16.88 12.9351 16.624 12.4 16.1333ZM45.3333 49.1333L42.5333 46.2667C42.0444 45.7333 41.8 45.1004 41.8 44.368C41.8 43.6356 42.0444 43.024 42.5333 42.5333C43.0222 42 43.6338 41.7449 44.368 41.768C45.1022 41.7911 45.7351 42.0462 46.2667 42.5333L49.1333 45.3333C49.6667 45.8222 49.9227 46.4444 49.9013 47.2C49.88 47.9556 49.624 48.6 49.1333 49.1333C48.6 49.6667 47.9556 49.9333 47.2 49.9333C46.4444 49.9333 45.8222 49.6667 45.3333 49.1333ZM42.5333 16.1333C42 15.6444 41.744 15.0338 41.7653 14.3013C41.7867 13.5689 42.0427 12.9351 42.5333 12.4L45.3333 9.53333C45.8222 9 46.4444 8.744 47.2 8.76533C47.9556 8.78667 48.6 9.04267 49.1333 9.53333C49.6667 10.0667 49.9333 10.7111 49.9333 11.4667C49.9333 12.2222 49.6667 12.8444 49.1333 13.3333L46.2667 16.1333C45.7333 16.6222 45.1111 16.8667 44.4 16.8667C43.6889 16.8667 43.0667 16.6222 42.5333 16.1333ZM9.53333 49.1333C9 48.6 8.73333 47.9556 8.73333 47.2C8.73333 46.4444 9 45.8222 9.53333 45.3333L12.4 42.5333C12.9333 42.0444 13.5662 41.8 14.2987 41.8C15.0311 41.8 15.6427 42.0444 16.1333 42.5333C16.6667 43.0222 16.9227 43.6338 16.9013 44.368C16.88 45.1022 16.624 45.7351 16.1333 46.2667L13.3333 49.1333C12.8444 49.6667 12.2222 49.9227 11.4667 49.9013C10.7111 49.88 10.0667 49.624 9.53333 49.1333Z"
        fill="#D9D9D9"
      />
    </svg>
  );

  const [theme, toggleTheme] = useTheme();

  useEffect(() => {
    if (theme === "dark") {
      document.documentElement.classList.add("dark");
    } else {
      document.documentElement.classList.remove("dark");
    }
  }, [theme]);

  function handleClick() {
    toggleTheme();
    clickSounds();
  }

  return (
      <button onClick={handleClick} onMouseEnter={hoverSounds} className="hover:-translate-y-1 transition ease-in-out">
        {theme === "dark" ? off : on}
      </button>
  );
}
